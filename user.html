<h1 id="title"></h1>
<h3>Here are your events:</h3>
<p id="events"></p>
<h3>Add an event</h3>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">
  function GetURLParameter(sParam) {
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split("&");
    for (var i = 0; i < sURLVariables.length; i++) {
      var sParameterName = sURLVariables[i].split("=");
      if (sParameterName[0] == sParam) {
        return sParameterName[1];
      }
    }
  }
  var name = GetURLParameter("name");
  $(document).ready(() => {
    $.ajax({
      url: "/events?name=" + name,
      type: "GET",
      dataType: "json",
      success: data => {
        $("#title").html("What's up " + name + "!");
        badge = document.createElement("div");
        badge.innerHTML = "<ul>";
        console.log(data.length);
        for (i = 0; i < data.length; i++) {
          badge.innerHTML +=
            "<li>" +
            data[i].eventName +
            ": " +
            data[i].eventDescription +
            "</li>";
        }
        badge.innerHTML += "</ul>";
        console.log(badge.innerHTML);
        document.getElementById("events").appendChild(badge);
      }
    });
  });
</script>
